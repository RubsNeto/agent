{% extends 'base.html' %}

{% block title %}Guia de Implementação - PanDia{% endblock %}
{% block page_title %}Guia de Implementação{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <!-- Introdução -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #e94560 0%, #d63652 100%); color: white;">
        <div style="display: flex; align-items: center; gap: 1.5rem;">
            <div style="width: 64px; height: 64px; background: rgba(255,255,255,0.2); border-radius: 16px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="32" height="32" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
            </div>
            <div>
                <h2 style="font-size: 1.5rem; font-weight: 600; margin: 0 0 0.5rem 0;">Bem-vindo ao PanDia!</h2>
                <p style="margin: 0; opacity: 0.95;">Siga este guia passo a passo para configurar e começar a usar seus agentes de IA.</p>
            </div>
        </div>
    </div>

    <!-- Passo 1: Configurar Padaria -->
    <div class="card" style="margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                1
            </div>
            <div style="flex: 1;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                    Configure sua Padaria
                </h3>
                <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                    A "Padaria" é sua empresa no sistema. Todos os agentes e configurações ficam organizados dentro dela.
                </p>
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                    <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                        <li>Clique em <strong>"Padaria"</strong> no menu lateral</li>
                        <li>Preencha os dados da sua empresa (nome, CNPJ, telefone, endereço)</li>
                        <li>Clique em "Salvar Alterações"</li>
                    </ol>
                </div>
                <a href="{% url 'organizations:list' %}" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                    </svg>
                    Ir para Padaria
                </a>
            </div>
        </div>
    </div>

    <!-- Passo 2: Criar Agente -->
    <div class="card" style="margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                2
            </div>
            <div style="flex: 1;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                    Crie seu Primeiro Agente
                </h3>
                <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                    O Agente é o "funcionário virtual" que vai atender seus clientes. Você configura como ele se comporta, o que ele sabe e como responde.
                </p>
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                    <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                        <li>Clique em <strong>"Agente"</strong> no menu lateral</li>
                        <li>Clique em "Novo Agente"</li>
                        <li>Preencha:
                            <ul style="margin-top: 0.5rem;">
                                <li><strong>Nome:</strong> Como o agente se apresenta (ex: "Ana")</li>
                                <li><strong>Papel:</strong> Função dele (ex: "Atendente")</li>
                                <li><strong>Setor:</strong> Área de atuação (ex: "Vendas")</li>
                                <li><strong>Saudação:</strong> Como ele cumprimenta os clientes</li>
                                <li><strong>Base de Conhecimento:</strong> Informações sobre produtos, serviços, preços</li>
                            </ul>
                        </li>
                        <li>Clique em "Salvar Agente"</li>
                    </ol>
                </div>
                <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                    <p style="margin: 0; color: #92400e; display: flex; align-items: start; gap: 0.5rem;">
                        <svg width="20" height="20" fill="none" stroke="#f59e0b" stroke-width="2" viewBox="0 0 24 24" style="flex-shrink: 0; margin-top: 2px;">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                        <span><strong>Dica:</strong> Quanto mais informações você colocar na Base de Conhecimento, melhor o agente vai responder!</span>
                    </p>
                </div>
                <a href="{% url 'agents:create' %}" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    Criar Agente
                </a>
            </div>
        </div>
    </div>

    <!-- Passo 3: Testar no Playground -->
    <div class="card" style="margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                3
            </div>
            <div style="flex: 1;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                    Teste seu Agente
                </h3>
                <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                    Antes de conectar com clientes reais, teste como o agente responde no Playground - um chat de testes interno.
                </p>
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                    <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                        <li>Vá em <strong>"Agente"</strong> no menu</li>
                        <li>Clique no agente que você criou</li>
                        <li>Clique em "Testar no Playground"</li>
                        <li>Converse com o agente e veja como ele responde</li>
                        <li>Se precisar ajustar, volte e edite as configurações</li>
                    </ol>
                </div>
                <a href="{% url 'agents:list' %}" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"/>
                    </svg>
                    Ver Agentes
                </a>
            </div>
        </div>
    </div>

    <!-- Passo 4: Gerar API Key -->
    <div class="card" style="margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #f59e0b, #ea8a08); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                4
            </div>
            <div style="flex: 1;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                    Gere uma Chave API
                </h3>
                <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                    A Chave API é como uma "senha especial" que permite outros sistemas (n8n, WhatsApp, etc) se conectarem com seu agente de forma segura.
                </p>
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                    <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                        <li>Clique em <strong>"API Keys"</strong> no menu lateral</li>
                        <li>Clique em "Nova API Key"</li>
                        <li>Dê um nome descritivo (ex: "WhatsApp - Atendimento")</li>
                        <li>Selecione o agente que vai usar essa chave</li>
                        <li>Clique em "Gerar Chave"</li>
                        <li><strong style="color: #dc2626;">IMPORTANTE:</strong> Copie e guarde a chave que aparece - ela só é mostrada uma vez!</li>
                    </ol>
                </div>
                <div style="background: #fee2e2; border-left: 4px solid #dc2626; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                    <p style="margin: 0; color: #991b1b; display: flex; align-items: start; gap: 0.5rem;">
                        <svg width="20" height="20" fill="none" stroke="#dc2626" stroke-width="2" viewBox="0 0 24 24" style="flex-shrink: 0; margin-top: 2px;">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                        <span><strong>Atenção:</strong> Nunca compartilhe sua API Key publicamente. Ela dá acesso ao seu agente!</span>
                    </p>
                </div>
                <a href="{% url 'organizations:apikeys' %}" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                    </svg>
                    Gerar API Key
                </a>
            </div>
        </div>
    </div>

    <!-- Passo 5: Conectar com n8n ou WhatsApp -->
    <div class="card" style="margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #e94560, #d63652); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                5
            </div>
            <div style="flex: 1;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                    Conecte com n8n ou WhatsApp
                </h3>
                <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                    Agora é hora de conectar seu agente com os canais onde seus clientes estão (WhatsApp, Telegram, site, etc). Isso é feito através do n8n.
                </p>
                
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0 0 0.75rem 0; font-weight: 600; color: var(--gray-700);">O que você vai precisar:</p>
                    <ul style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                        <li><strong>API Key:</strong> A chave que você gerou no passo 4</li>
                        <li><strong>Slug do Agente:</strong> O identificador único do seu agente (veja na lista de agentes)</li>
                        <li><strong>Ferramenta de automação:</strong> n8n, Make ou similar</li>
                    </ul>
                </div>

                <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                    <p style="margin: 0; color: #92400e; display: flex; align-items: start; gap: 0.5rem;">
                        <svg width="20" height="20" fill="none" stroke="#f59e0b" stroke-width="2" viewBox="0 0 24 24" style="flex-shrink: 0; margin-top: 2px;">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span><strong>Precisa de ajuda técnica?</strong> Entre em contato com o suporte para configurar a integração com n8n ou WhatsApp.</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Passo 6: Monitorar -->
    <div class="card" style="margin-bottom: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #06b6d4, #0891b2); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                6
            </div>
            <div style="flex: 1;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                    Monitore e Ajuste
                </h3>
                <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                    Acompanhe como seu agente está performando e faça ajustes quando necessário.
                </p>
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Onde acompanhar:</p>
                    <ul style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                        <li><strong>Dashboard:</strong> Veja estatísticas de uso e atividade</li>
                        <li><strong>Logs de Auditoria:</strong> Histórico completo de todas as ações</li>
                        <li><strong>Editar Agente:</strong> Ajuste respostas e conhecimento conforme necessário</li>
                    </ul>
                </div>
                <div style="display: flex; gap: 0.75rem;">
                    <a href="{% url 'ui:dashboard' %}" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                            <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                        </svg>
                        Dashboard
                    </a>
                    <a href="{% url 'audit:list' %}" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                        Logs
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Suporte -->
    <div class="card" style="background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); border: 2px solid var(--gray-200);">
        <div style="text-align: center;">
            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <svg width="24" height="24" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 0.5rem 0; color: var(--gray-900);">
                Precisa de Ajuda?
            </h3>
            <p style="color: var(--gray-600); margin-bottom: 1.5rem;">
                Se tiver dúvidas ou precisar de suporte técnico para configurar as integrações, nossa equipe está pronta para ajudar!
            </p>
            <a href="{% url 'ui:dashboard' %}" class="btn btn-primary">
                Voltar ao Dashboard
            </a>
        </div>
    </div>
</div>
{% endblock %}
