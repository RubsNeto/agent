{% extends 'base.html' %}

{% block title %}Guia de Implementa√ß√£o - PanDia{% endblock %}
{% block page_title %}Guia de Implementa√ß√£o{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <!-- Introdu√ß√£o -->
    <div class="card"
        style="margin-bottom: 2rem; background: linear-gradient(135deg, #e94560 0%, #d63652 100%); color: white;">
        <div style="display: flex; align-items: center; gap: 1.5rem;">
            <div
                style="width: 64px; height: 64px; background: rgba(255,255,255,0.2); border-radius: 16px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="32" height="32" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            </div>
            <div>
                <h2 style="font-size: 1.5rem; font-weight: 600; margin: 0 0 0.5rem 0;">Bem-vindo ao PanDia!</h2>
                <p style="margin: 0; opacity: 0.95;">Siga este guia passo a passo para configurar e come√ßar a usar seus
                    agentes de IA.</p>
            </div>
        </div>
    </div>

    <!-- SE√á√ÉO ADMIN -->
    {% if user.is_superuser %}
    <div style="margin-bottom: 2rem;">
        <h2
            style="font-size: 1.5rem; font-weight: 700; color: var(--gray-900); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem;">
            <svg width="24" height="24" fill="none" stroke="#9333ea" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
            Fluxo do Administrador
        </h2>

        <!-- Passo 1: Cadastrar Novo Cliente -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div
                    style="width: 40px; height: 40px; background: linear-gradient(135deg, #9333ea, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                    1
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                        Cadastrar Novo Cliente
                    </h3>
                    <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                        Crie uma nova conta de padaria para o seu cliente com os dados de acesso.
                    </p>
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                            <li>Acesse o <strong>Admin Panel</strong></li>
                            <li>Clique em <strong>"Novo Cliente"</strong></li>
                            <li>Preencha o formul√°rio com os dados do cliente (nome da padaria, usu√°rio, senha)</li>
                            <li>Clique em <strong>"Criar"</strong></li>
                        </ol>
                    </div>
                    <a href="{% url 'admin_panel:padaria_create' %}" class="btn btn-primary"
                        style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                        </svg>
                        Novo Cliente
                    </a>
                </div>
            </div>
        </div>

        <!-- Passo 2: Passar dados de acesso -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div
                    style="width: 40px; height: 40px; background: linear-gradient(135deg, #9333ea, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                    2
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                        Passar Dados de Acesso
                    </h3>
                    <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                        Envie as credenciais de acesso para o dono da padaria.
                    </p>
                    <div
                        style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 4px;">
                        <p style="margin: 0; color: #92400e;">
                            <strong>Envie para o cliente:</strong><br>
                            ‚Ä¢ <strong>Usu√°rio:</strong> (nome de usu√°rio criado)<br>
                            ‚Ä¢ <strong>Senha:</strong> (senha definida)<br>
                            ‚Ä¢ <strong>URL de Acesso:</strong> link do sistema
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Passo 3: Configurar Evolution -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div
                    style="width: 40px; height: 40px; background: linear-gradient(135deg, #9333ea, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                    3
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                        Configurar Inst√¢ncia no Evolution
                    </h3>
                    <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                        Acesse o painel do Evolution e configure a inst√¢ncia criada para esse novo cliente.
                    </p>
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                            <li>Acesse o painel de administrador do <strong>Evolution API</strong></li>
                            <li>Localize a inst√¢ncia criada para o novo cliente</li>
                            <li>Configure as op√ß√µes necess√°rias (webhooks, integra√ß√£o, etc.)</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- SE√á√ÉO DONO DA PADARIA -->
    <div style="margin-bottom: 2rem;">
        <h2
            style="font-size: 1.5rem; font-weight: 700; color: var(--gray-900); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem;">
            <svg width="24" height="24" fill="none" stroke="#10b981" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
            </svg>
            Fluxo do Dono da Padaria
        </h2>

        <!-- Passo 1: Criar Agente -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div
                    style="width: 40px; height: 40px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                    1
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                        Criar seu Agente de IA
                    </h3>
                    <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                        Configure o agente que vai responder seus clientes no WhatsApp.
                    </p>
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                            <li>Clique em <strong>"Agente"</strong> no menu lateral</li>
                            <li>Clique em <strong>"Criar Agente"</strong></li>
                            <li>Selecione sua padaria</li>
                            <li>Preencha os dados do agente:
                                <ul style="margin-top: 0.5rem;">
                                    <li><strong>Nome:</strong> como o agente se apresenta</li>
                                    <li><strong>Sauda√ß√£o:</strong> mensagem de boas-vindas</li>
                                    <li><strong>Base de Conhecimento:</strong> informa√ß√µes sobre produtos e servi√ßos
                                    </li>
                                </ul>
                            </li>
                            <li>Clique em <strong>"Salvar"</strong></li>
                        </ol>
                    </div>
                    <div
                        style="background: #d1fae5; border-left: 4px solid #10b981; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                        <p style="margin: 0; color: #065f46;">
                            <strong>‚ú® Autom√°tico:</strong> Ao salvar, sua API Key √© gerada automaticamente! Copie e
                            guarde a chave que aparece na tela.
                        </p>
                    </div>
                    <a href="{% url 'agents:create' %}" class="btn btn-primary"
                        style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        Criar Agente
                    </a>
                </div>
            </div>
        </div>

        <!-- Passo 2: Salvar API Key no Supabase -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div
                    style="width: 40px; height: 40px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                    2
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                        Salvar API Key no Supabase
                    </h3>
                    <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                        Ap√≥s gerar a API Key, ela deve ser salva na tabela do Supabase para integra√ß√£o.
                    </p>
                    <div
                        style="background: #fee2e2; border-left: 4px solid #dc2626; padding: 1rem; border-radius: 4px;">
                        <p style="margin: 0; color: #991b1b;">
                            <strong>‚ö†Ô∏è Importante:</strong> A API Key s√≥ √© exibida uma vez! Copie e salve imediatamente
                            no Supabase.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Passo 3: Conectar WhatsApp -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: start; gap: 1rem;">
                <div
                    style="width: 40px; height: 40px; background: linear-gradient(135deg, #25d366, #128c7e); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: white; font-weight: 700; font-size: 1.25rem;">
                    3
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--gray-900);">
                        Conectar N√∫mero do WhatsApp
                    </h3>
                    <p style="color: var(--gray-600); line-height: 1.6; margin-bottom: 1rem;">
                        Conecte seu n√∫mero de WhatsApp Business para come√ßar a receber mensagens.
                    </p>
                    <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--gray-700);">Como fazer:</p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: var(--gray-600); line-height: 1.8;">
                            <li>Clique em <strong>"Padaria"</strong> no menu lateral</li>
                            <li>Clique na sua padaria</li>
                            <li>Clique em <strong>"Conectar WhatsApp"</strong></li>
                            <li>Clique em <strong>"Gerar QR Code"</strong></li>
                            <li>Abra o WhatsApp no seu celular</li>
                            <li>Escaneie o QR Code com o WhatsApp</li>
                            <li>Aguarde a confirma√ß√£o de conex√£o ‚úÖ</li>
                        </ol>
                    </div>
                    <a href="{% url 'organizations:list' %}" class="btn btn-primary"
                        style="display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, #25d366, #128c7e);">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
                        </svg>
                        Ir para Padaria
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Pronto! -->
    <div class="card"
        style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; text-align: center;">
        <div
            style="width: 64px; height: 64px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
            <svg width="32" height="32" fill="none" stroke="white" stroke-width="3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <h2 style="font-size: 1.5rem; font-weight: 600; margin: 0 0 0.5rem 0;">Pronto!</h2>
        <p style="margin: 0 0 1.5rem 0; opacity: 0.95;">
            Seu agente est√° configurado e conectado. Agora √© s√≥ esperar as mensagens chegarem! üéâ
        </p>
        <a href="{% url 'ui:dashboard' %}" class="btn" style="background: white; color: #059669; font-weight: 600;">
            Voltar ao Dashboard
        </a>
    </div>
</div>
{% endblock %}