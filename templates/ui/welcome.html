{% extends 'base.html' %}
{% load static %}

{% block title %}Início - PanDia{% endblock %}
{% block page_title %}Início{% endblock %}

{% block content %}
<!-- Welcome Header -->
<div class="card" style="margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, #e94560 0%, #d63652 50%, #c02742 100%); color: white; border: none;">
    <div style="display: flex; align-items: center; gap: 1.5rem;">
        <div style="width: 80px; height: 80px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center;">
            <svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
        </div>
        <div>
            <h1 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0.25rem;">
                Boas-vindas de volta, {{ user.first_name|default:user.username }}!
            </h1>
            <p style="opacity: 0.9; font-size: 1rem; margin: 0;">
                {% if user_role == 'admin' %}
                    Você está logado como <strong>Administrador do Sistema</strong>
                {% elif user_role == 'agente_credenciado' %}
                    Você está logado como <strong>Agente Credenciado</strong>
                {% else %}
                    {% if padaria %}
                    Você está logado como <strong>Responsável</strong> pela padaria <strong>{{ padaria.name }}</strong>
                    {% else %}
                    Você está logado como <strong>Usuário</strong>
                    {% endif %}
                {% endif %}
            </p>
        </div>
    </div>
</div>

<!-- User Info Card -->
<div style="margin-bottom: 2rem;">
    <div class="content-header" style="margin-bottom: 1rem;">
        <h2 class="content-title" style="font-size: 1.25rem; margin-bottom: 0;">Suas Informações</h2>
    </div>
    
    <div class="card" style="padding: 1.5rem;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <div>
                <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--gray-400); margin-bottom: 0.25rem;">Nome Completo</div>
                <div style="font-size: 1rem; font-weight: 500; color: var(--gray-800);">
                    {{ user.get_full_name|default:user.username }}
                </div>
            </div>
            
            <div>
                <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--gray-400); margin-bottom: 0.25rem;">E-mail</div>
                <div style="font-size: 1rem; font-weight: 500; color: var(--gray-800);">
                    {{ user.email|default:"Não informado" }}
                </div>
            </div>
            
            <div>
                <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--gray-400); margin-bottom: 0.25rem;">Telefone</div>
                <div style="font-size: 1rem; font-weight: 500; color: var(--gray-800);">
                    {% if padaria and padaria.responsavel_telefone %}{{ padaria.responsavel_telefone }}{% elif profile.phone %}{{ profile.phone }}{% else %}Não informado{% endif %}
                </div>
            </div>
            
            {% if padaria %}
            <div>
                <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--gray-400); margin-bottom: 0.25rem;">Padaria</div>
                <div style="font-size: 1rem; font-weight: 500; color: var(--gray-800);">
                    {{ padaria.name }}
                </div>
            </div>
            {% endif %}
            
            <div>
                <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--gray-400); margin-bottom: 0.25rem;">Membro desde</div>
                <div style="font-size: 1rem; font-weight: 500; color: var(--gray-800);">
                    {{ user.date_joined|date:"d/m/Y" }}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions Section -->
<div>
    <div class="content-header" style="margin-bottom: 1rem;">
        <h2 class="content-title" style="font-size: 1.25rem; margin-bottom: 0;">Ações Rápidas</h2>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem;">
        {% if user_role == 'admin' %}
        <!-- Admin Actions -->
        <a href="{% url 'admin_panel:padaria_create' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#059669" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Criar Padaria</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Cadastrar nova padaria</div>
                </div>
            </div>
        </a>
        
        <a href="{% url 'admin_panel:clientes_report' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#2563eb" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Relatório de Clientes</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Visualizar métricas</div>
                </div>
            </div>
        </a>
        
        <a href="{% url 'admin_panel:users_list' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#9333ea" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Gerenciar Usuários</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Adicionar ou editar</div>
                </div>
            </div>
        </a>
        
        <a href="{% url 'admin_panel:padarias_list' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#d97706" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Lista de Padarias</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Ver todas as padarias</div>
                </div>
            </div>
        </a>
        
        <a href="{% url 'admin_panel:agentes_credenciados_list' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(14, 165, 233, 0.1), rgba(2, 132, 199, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#0284c7" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Agentes Credenciados</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Gerenciar agentes</div>
                </div>
            </div>
        </a>
        
        {% elif user_role == 'agente_credenciado' %}
        <!-- Agent Credenciado Actions -->
        <a href="{% url 'admin_panel:agente_padaria_create' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#059669" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Cadastrar Nova Padaria</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Adicionar novo cliente</div>
                </div>
            </div>
        </a>

        <a href="{% url 'admin_panel:agente_minhas_padarias' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#2563eb" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Visualizar Minhas Padarias</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Gerenciar clientes</div>
                </div>
            </div>
        </a>

        <a href="{% url 'admin_panel:agente_relatorio' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#9333ea" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Visualizar Relatórios</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Métricas e desempenho</div>
                </div>
            </div>
        </a>
        
        {% else %}
        <!-- User (Padaria) Actions -->
        {% if padaria %}
        <a href="{% url 'organizations:produto_create' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#059669" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Criar Produto</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Adicionar novo produto</div>
                </div>
            </div>
        </a>
        
        <a href="{% url 'organizations:promocao_create' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(233, 69, 96, 0.1), rgba(214, 54, 82, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#e94560" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Criar Promoção</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Nova oferta especial</div>
                </div>
            </div>
        </a>
        
        <a href="{% url 'organizations:cliente_list' %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#2563eb" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Ver Clientes</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Lista de clientes</div>
                </div>
            </div>
        </a>
        
        {% if agente %}
        <a href="{% url 'agents:edit' agente.slug %}" class="card" style="padding: 1.5rem; text-decoration: none; transition: all 0.2s; border: 2px solid transparent;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.1)); display: flex; align-items: center; justify-content: center;">
                    <svg width="24" height="24" fill="none" stroke="#9333ea" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                </div>
                <div>
                    <div style="font-size: 1rem; font-weight: 600; color: var(--gray-800);">Configurar Agente</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">Ajustar seu agente IA</div>
                </div>
            </div>
        </a>
        {% endif %}
        {% else %}
        <!-- No Padaria Assigned -->
        <div class="card" style="padding: 2rem; text-align: center; grid-column: 1 / -1;">
            <svg width="48" height="48" fill="none" stroke="var(--gray-300)" viewBox="0 0 24 24" style="margin: 0 auto 1rem;">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
            <p style="color: var(--gray-500); font-size: 0.875rem;">Você ainda não está vinculado a nenhuma padaria. Entre em contato com o administrador.</p>
        </div>
        {% endif %}
        {% endif %}
    </div>
</div>



<style>
.card:hover {
    border-color: var(--primary) !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(233, 69, 96, 0.15);
}
</style>
{% endblock %}
