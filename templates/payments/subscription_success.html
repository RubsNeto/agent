{% extends 'base.html' %}

{% block title %}Assinatura Ativa - {{ padaria.name }}{% endblock %}
{% block page_title %}Pagamento Confirmado{% endblock %}

{% block content %}
<div class="success-container">
    <!-- Ícone de Sucesso Animado -->
    <div class="success-animation">
        <div class="success-icon">
            <svg width="64" height="64" fill="none" stroke="white" stroke-width="3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <div class="confetti"></div>
    </div>

    <!-- Mensagem Principal -->
    <h1 class="success-title">Pagamento Confirmado!</h1>
    <p class="success-subtitle">Sua assinatura foi ativada com sucesso</p>

    <!-- Card de Detalhes -->
    <div class="details-card">
        <div class="detail-row">
            <div class="detail-icon">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
                    </path>
                </svg>
            </div>
            <div class="detail-content">
                <span class="detail-label">Estabelecimento</span>
                <span class="detail-value">{{ padaria.name }}</span>
            </div>
        </div>

        <div class="detail-row">
            <div class="detail-icon status-active">
                <svg fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <div class="detail-content">
                <span class="detail-label">Status</span>
                <span class="detail-value status-badge">Assinatura Ativa</span>
            </div>
        </div>

        <div class="detail-row">
            <div class="detail-icon">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                    </path>
                </svg>
            </div>
            <div class="detail-content">
                <span class="detail-label">Valor do Plano</span>
                <span class="detail-value">R$ {{ subscription.plan_value|floatformat:2 }}/mês</span>
            </div>
        </div>

        <div class="detail-row highlight">
            <div class="detail-icon">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="20" height="20">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                    </path>
                </svg>
            </div>
            <div class="detail-content">
                <span class="detail-label">Próximo Pagamento</span>
                <span class="detail-value">{% if subscription.next_due_date %}{{ subscription.next_due_date|date:"d/m/Y"
                    }}{% else %}em 30 dias{% endif %}</span>
            </div>
        </div>
    </div>

    <!-- Mensagem Informativa -->
    <div class="info-box">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="20" height="20">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p>Você receberá um lembrete por e-mail antes do próximo vencimento. Seu acesso ao sistema está
            <strong>liberado</strong>!</p>
    </div>

    <!-- Botões de Ação -->
    <div class="action-buttons">
        <a href="{% url 'ui:dashboard' %}" class="btn-primary">
            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="20" height="20">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                </path>
            </svg>
            Ir para o Dashboard
        </a>
        <a href="{% url 'payments:subscription_status' %}" class="btn-secondary">
            Ver Detalhes da Assinatura
        </a>
    </div>
</div>

<style>
    .success-container {
        max-width: 520px;
        margin: 0 auto;
        text-align: center;
        padding: 2rem 1.5rem 3rem;
    }

    /* Animação do Ícone */
    .success-animation {
        position: relative;
        margin-bottom: 1.5rem;
    }

    .success-icon {
        width: 100px;
        height: 100px;
        background: linear-gradient(135deg, #10b981, #059669);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        box-shadow: 0 15px 50px rgba(16, 185, 129, 0.35);
        animation: pulse-success 2s ease-in-out infinite;
    }

    @keyframes pulse-success {

        0%,
        100% {
            box-shadow: 0 15px 50px rgba(16, 185, 129, 0.35);
        }

        50% {
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.5);
        }
    }

    /* Títulos */
    .success-title {
        font-size: 1.875rem;
        font-weight: 700;
        color: #059669;
        margin: 0 0 0.5rem;
    }

    .success-subtitle {
        font-size: 1.125rem;
        color: #6b7280;
        margin: 0 0 2rem;
    }

    /* Card de Detalhes */
    .details-card {
        background: white;
        border-radius: 16px;
        padding: 1.25rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        margin-bottom: 1.5rem;
        text-align: left;
    }

    .detail-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.875rem 0;
        border-bottom: 1px solid #f3f4f6;
    }

    .detail-row:last-child {
        border-bottom: none;
    }

    .detail-row.highlight {
        background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        margin: 0.5rem -1.25rem -1.25rem;
        padding: 1rem 1.25rem;
        border-radius: 0 0 16px 16px;
        border-bottom: none;
    }

    .detail-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: #f3f4f6;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6b7280;
        flex-shrink: 0;
    }

    .detail-icon.status-active {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
    }

    .detail-content {
        display: flex;
        flex-direction: column;
        gap: 0.125rem;
    }

    .detail-label {
        font-size: 0.75rem;
        color: #9ca3af;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .detail-value {
        font-size: 1rem;
        font-weight: 600;
        color: #1f2937;
    }

    .status-badge {
        color: #059669 !important;
    }

    /* Info Box */
    .info-box {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        background: #eff6ff;
        border: 1px solid #bfdbfe;
        border-radius: 12px;
        padding: 1rem;
        text-align: left;
        margin-bottom: 2rem;
    }

    .info-box svg {
        color: #3b82f6;
        flex-shrink: 0;
        margin-top: 2px;
    }

    .info-box p {
        margin: 0;
        font-size: 0.875rem;
        color: #1e40af;
        line-height: 1.5;
    }

    /* Botões */
    .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .btn-primary {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.875rem 1.5rem;
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        border-radius: 12px;
        font-weight: 600;
        font-size: 1rem;
        text-decoration: none;
        transition: all 0.2s;
        box-shadow: 0 4px 14px rgba(16, 185, 129, 0.4);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
    }

    .btn-secondary {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 1.5rem;
        background: transparent;
        color: #6b7280;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        font-weight: 500;
        font-size: 0.9375rem;
        text-decoration: none;
        transition: all 0.2s;
    }

    .btn-secondary:hover {
        background: #f9fafb;
        color: #374151;
        border-color: #d1d5db;
    }
</style>
{% endblock %}